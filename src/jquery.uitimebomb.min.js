/*!
 * uiTimeBomb v1.0.0
 *
 * @author Patrick Purcell
 * @copyright Copyright (c) 2016 WCP Digital
 * @license http://opensource.org/licenses/MIT
 * @link http://www.wcpdigital.com.au
 * @link http://patrickpurcell.bio
 *
 * Date: 2016-08-23
 */
 !function(a){"use strict";function b(b){var c=this,e={elements:[],date:new Date,padNumbers:!1,mode:"years",format:"{y} years, {m} months, {d} days, {h} hours, {i} minutes, {s} seconds",localTime:!0,onStart:null,onUpdate:null,onComplete:null},f=null,g=0,i=function(a,b){return a.replace(/{([^{}]*)}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})},l=function(a){return e.date=a,c},m=function(){return e.date},n=function(a){var b=0,c=0,d=0,e=0,f=0,h=0,i=g;switch(String(a).toLowerCase()){default:case"years":b=Math.floor(i/31536e3),i-=31536e3*b;case"months":c=Math.floor(i/2592e3),i-=2592e3*c;case"days":d=Math.floor(i/86400),i-=86400*d;case"hours":e=Math.floor(i/3600),i-=3600*e;case"minutes":f=Math.floor(i/60),i-=60*f;case"seconds":h=Math.floor(i)}return{y:b,m:c,d:d,h:e,i:f,s:h}},o=function(){return e.onStart&&e.onStart(c)},p=function(){if(e.elements)for(var a=n(e.mode),b=i(e.format,a),c=0,d=null,f=e.elements.length;c<f;c++)d=e.elements[c],void 0!==d.innerHTML&&(d.innerHTML=b)},q=function(){var a=e.localTime?60*e.date.getTimezoneOffset():0,b=e.date.getTime(),d=(new Date).getTime();return g=.001*(b-d)+a,g<=0?(g=0,p(),e.onUpdate&&e.onUpdate(c),clearInterval(f),r()):(p(),e.onUpdate&&e.onUpdate(c))},r=function(){return e.onComplete&&e.onComplete(c)},s=function(b){c.get=n,c.setDate=l,c.getDate=m,c.supplant=i,b&&(e=a.extend({},e,b),a.isArray(e.elements)||(e.elements=[e.elements])),o(),f=setInterval(function(){q()},1e3),q()};s(b)}a.uiTimeBomb=function(a){return new b(a)},a.fn.uiTimeBomb=function(c){return c=c||{},c.elements=a(this).toArray()||[],new b(c)}}(jQuery);